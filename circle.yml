machine:
  environment:
    IMPORT_PATH: "github.com/gruntwork-io/${CIRCLE_PROJECT_REPONAME}"
    REPO: "$HOME/.go_workspace/src/${IMPORT_PATH}"
    GOOS: linux

dependencies:
  override:
    # Get our repo into the CircleCI GOPATH.
    - |
        rm -rf ${REPO}
        mkdir -p ${REPO}
        ln -s "/home/ubuntu/${CIRCLE_PROJECT_REPONAME}" "${REPO}"

test:
  override:
    - |
        ${REPO}/_ci/run-tests.sh
