machine:
  environment:
    IMPORT_PATH: "github.com/gruntwork-io/${CIRCLE_PROJECT_REPONAME}"
    REPO: "$HOME/.go_workspace/src/${IMPORT_PATH}"
    GOOS: linux

dependencies:
  override:
    # Get our repo into the CircleCI GOPATH.
    - |
        mkdir -p "${REPO}"
        rm -rf "${REPO}"
        ln -s "${HOME}/${CIRCLE_PROJECT_REPONAME}" "${REPO}"

test:
  override:
    - |
        ${REPO}/_ci/run-tests.sh
